<%- include('./partials/head') %>
  
  <!-- Navbar section -->
  <%- include('./partials/header') %>
    <!-- This is left sidebar  -->
    <%- include('./partials/left-side-bar') %>
    <!-- This is right side section -->
    <main class="main" id="mainContent">
        <div class="base-section coustom-section mt-4 p-5">
            <!--DASHBOARD CONTENT START-->
            <div class="breadcrumbs-container">
                <ul class="breadcrumb">
                    <li><a href="../html/dashboard.html">ADMIN</a></li>
                    <li><a href="">Teaching Excellence</a></li>
                </ul>
            </div>
            <div class="card table-card">
                <div class="card-header table-card-header text-uppercase d-flex align-items-center justify-content-between">
                    <div>
                        <h5>PROGRAM LIST</h5>
                    </div>
                    <div class="me-2">
                        <a class="btn btn-danger" href="/admin/programs/download"><i class="fas fa-download"></i>
                            Download </a>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                            <i class="fas fa-plus"></i></button>
                        </button>
                    </div>
                </div>
                <div class="card-body table-responsive">
                    <div class="d-flex justify-content-between">
                        <div>
                            <label>Show Entries</label>
                            <select class="form-select" id="changeEntry">
                                <option value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                                <option value="150">150</option>
                                <option value="200">200</option>
                                <option value="250">250</option>
                                <option value="300">300</option>
                                <option value="350">350</option>
                                <option value="400">400</option>
                                <option value="500">500</option>
                                <option value="800">800</option>
                                <option value="1000">1000</option>
                            </select>
                        </div>
                        <div>
                            <div class="table-searchbar-container"><button type="button"><i class="fas fa-search"></i>
                                </button><input type="search" id="searchkeyword" placeholder="Enter keywords"
                                    class="table-searchbar">
                            </div>
                        </div>
                    </div>
                    <table class="table custom-table" id="teachingExecellence">
                        <thead>
                            <th>#</th>
                            <th>Pedagogy innovation</th>
                            <th>FDP Program on academic</th>
                            <th>Workshop for Students</th>
                            <th>Program Orientation</th>
                            <th>Action</th>
                        </thead>


                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>8051</td>
                                <td>MASTER OF BUSINESS ADMINISTRATION-8051</td>
                                <td>Full Time</td>
                                <td>SBM-NM-M</td>
                                <td> <a class="view-program" data-id="6"><i class="fa-solid fa-eye"></i></a>
                                    <a class="edit-program" data-id="6"><i class="fa fa-edit"></i></a>
                                    <a class="delete-program" data-id="6"><i class="fa-solid fa-trash"></i></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="d-flex justify-content-between">
                        <div>
                            <p>Total entries:1
                            </p>
                        </div>
                        <div>
                            <p id="pagination" class="pagination-search"></p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Import Modal -->
            <div class="modal fade" id="open-program-modal" tabindex="-1" aria-labelledby="open-program-modal"
                aria-hidden="true">
            </div>
            <!-- EDIT PROGRAM AND UPDATE -->
            <div class="modal fade" id="edit-program-modal" tabindex="-1" aria-labelledby="editModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editModalLabel">Update Program</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div id="errorHtml"></div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="exampleInputEmail1" class="form-label">Program Name</label>
                                <input type="text" class="form-control" id="program_name" name="program_name">
                                <input type="hidden" class="form-control" id="hidden_id" name="hidden_id">
                            </div>
                            <div class="mb-3">
                                <label for="exampleInputPassword1" class="form-label">Program Type</label>
                                <select class="form-control" name="program_type_lid" id="program_type_lid">

                                    <option value="1">Full Time</option>

                                    <option value="2">Part Time</option>

                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="abbr" class="form-label">Program Abbr</label>
                                <input type="text" class="form-control" id="abbr" name="abbr">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary updateProgram">Update</button>
                        </div>
                    </div>
                </div>
            </div>
    </main>
    <!-- Modal  form -->
    <div class="modal fade hamburger" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl modal-fullscreen" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Teaching Excellence Form</h5>
                    <div class="close" data-dismiss="modal" aria-label="Close" id="close">
                       <i class="fas fa-times fa-2x" ></i>
                    </div>
                </div>
                <div class="modal-body">
                    <!-- Your form code goes here -->
                    <div class="base-section coustom-section mt-4">
                        <h3 class="text-center mb-5">Teaching Excellence</h3>
                        <div class="row">
                            <!-- Pedagogy innovation -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="padagogy" class="form-label fw-bold">Pedagogy innovation</label>
                                <input type="text" name="pada" id="padagogy" class="form-control" />
                            </div>

                            <!-- file upload -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="upload" class="form-label fw-bold ">Upload documents</label>
                                <input type="file" name="upload-file" class="form-control " id="upload"
                                    placeholder="upload-file">
                            </div>
                            <!-- link -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="link" class="form-label fw-bold">Link</label>
                                <input type="text" name="pada" id="link" class="form-control" placeholder="https://" />
                            </div>
                        </div>

                        <div class="row">
                            <!-- FDP Program on academic processes (pedagogy, case teaching, simulations) -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="fdp" class="form-label fw-bold">FDP Program on academic processes (pedagogy,
                                    case teaching, simulations)</label>
                                <input type="text" name="fdp-program" id="fdp" class="form-control">
                            </div>

                            <!-- file upload -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="upload" class="form-label fw-bold  mb-4">Upload documents</label>
                                <input type="file" name="upload-file" class="form-control " id="upload"
                                    placeholder="upload-file">
                            </div>
                            <!-- link -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="link" class="form-label fw-bold mb-4">Link</label>
                                <input type="text" name="pada" id="link" class="form-control" placeholder="https://" />
                            </div>
                        </div>

                        <div class="row">
                            <!-- Workshop for Students -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="Workshop" class="form-label fw-bold">Workshop for Students</label>
                                <input type="text" name="workshop-details" id="Workshop" class="form-control ">
                            </div>
                            <!-- file upload -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="upload" class="form-label fw-bold ">Upload documents</label>
                                <input type="file" name="upload-file" class="form-control " id="upload"
                                    placeholder="upload-file">
                            </div>
                            <!-- link -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="link" class="form-label fw-bold">Link</label>
                                <input type="text" name="pada" id="link" class="form-control" placeholder="https://" />
                            </div>
                        </div>
                        <div class="row">
                            <!-- Inviting visiting faculty from the industry to handle niche workshops  -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="invitingFaculty" class="form-label fw-bold">Inviting visiting faculty from
                                    the industry to handle niche workshops</label>
                                <input type="text" name="inviting-faculty" id="inviting-faculty" class="form-control ">
                            </div>
                            <!-- file upload -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="upload" class="form-label fw-bold mb-4">Upload documents</label>
                                <input type="file" name="upload-file" class="form-control " id="upload"
                                    placeholder="upload-file">
                            </div>
                            <!-- link -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="link" class="form-label fw-bold mb-4">Link</label>
                                <input type="text" name="pada" id="link" class="form-control" placeholder="https://" />
                            </div>
                        </div>

                        <div class="row">
                            <!-- Program Orientation -->
                            <div class="col-lg-4 col-md-6 col-sm-12">
                                <label for="programOrientation" class="form-label fw-bold ">Program Orientation</label>
                                <input type="text" name="program-orientation" id="programOrientation"
                                    class="form-control">
                            </div>
                            <!-- file upload -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="upload" class="form-label fw-bold ">Upload documents</label>
                                <input type="file" name="upload-file" class="form-control " id="upload"
                                    placeholder="upload-file">
                            </div>
                            <!-- link -->
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <label for="link" class="form-label fw-bold">Link</label>
                                <input type="text" name="pada" id="link" class="form-control" placeholder="https://" />
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <!-- Add your modal footer buttons if needed -->
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button class="btn btn-md btn-success" id="submitBtn">Submit</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap and jQuery scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- custom javascript -->
    <script src="../js/script.js"></script>
    <script>
        // adding data into the table row
        document.addEventListener('DOMContentLoaded', function () {
            const tableBody = document.getElementById('teachingExecellence').getElementsByTagName('tbody')[0];

            // Function to update data-id attributes
            function updateDataIds() {
                const deleteButtons = tableBody.querySelectorAll('.delete-program');
                console.log('detelet button clicked in id ==>>>', deleteButtons);
                deleteButtons.forEach((button, index) => {
                    button.setAttribute('data-id', index + 1);
                    console.log('index>>>>>>>>>>>',index);
                });

                console.log('detelet button  id after each ==>>>', deleteButtons);

            }

            // Add an event listener to the submit button
            document.getElementById('submitBtn').addEventListener('click', function () {
                // Create a new row and populate it with form data
                console.log('data added when i click >>>>')
                const newRow = tableBody.insertRow(tableBody.rows.length);
                const cells = [
                    newRow.insertCell(0),
                    newRow.insertCell(1),
                    newRow.insertCell(2),
                    newRow.insertCell(3),
                    newRow.insertCell(4),
                    newRow.insertCell(5),
                ];

                cells[0].textContent = tableBody.rows.length; // Incremental number
                cells[1].textContent = document.getElementById('padagogy').value;
                cells[2].textContent = document.getElementById('fdp').value;
                cells[3].textContent = document.getElementById('Workshop').value;
                cells[4].textContent = document.getElementById('programOrientation').value;
                cells[5].innerHTML = `
            <a class="view-program" data-id="${tableBody.rows.length}"><i class="fa-solid fa-eye"></i></a>
            <a class="edit-program" data-id="${tableBody.rows.length}"><i class="fa fa-edit"></i></a>
            <a class="delete-program" data-id="${tableBody.rows.length}"><i class="fa-solid fa-trash"></i></a>
        `;
                // Add an event listener to the delete button in the newly added row
                cells[5].querySelector('.delete-program').addEventListener('click', function () {
                    const rowNumber = this.getAttribute('data-id');
                    // Check if the row index is within the valid range
                    if (rowNumber <= tableBody.rows.length) {
                        // Remove the corresponding row from the table
                        console.log('row number ===>>>>', rowNumber);
                        tableBody.deleteRow(rowNumber - 1);
                        // Update data-id attributes after deletion
                        updateDataIds();
                    }
                });

                // Close the modal
                $('#exampleModal').modal('hide');
            });
        });

    </script>
</body>

</html>