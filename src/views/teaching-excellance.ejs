<%- include('./partials/head') %>
  
  <!-- Navbar section -->
  <%- include('./partials/header') %>
    <!-- This is left sidebar  -->
    <%- include('./partials/left-side-bar') %>
    <!-- This is right side section -->
    <!-- Bootstrap and jQuery scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- custom javascript -->
    <script src="../js/script.js"></script>
    <script>
        // adding data into the table row
        document.addEventListener('DOMContentLoaded', function () {
            const tableBody = document.getElementById('teachingExecellence').getElementsByTagName('tbody')[0];

            // Function to update data-id attributes
            function updateDataIds() {
                const deleteButtons = tableBody.querySelectorAll('.delete-program');
                console.log('detelet button clicked in id ==>>>', deleteButtons);
                deleteButtons.forEach((button, index) => {
                    button.setAttribute('data-id', index + 1);
                    console.log('index>>>>>>>>>>>',index);
                });

                console.log('detelet button  id after each ==>>>', deleteButtons);

            }

            // Add an event listener to the submit button
            document.getElementById('submitBtn').addEventListener('click', function () {
                // Create a new row and populate it with form data
                console.log('data added when i click >>>>')
                const newRow = tableBody.insertRow(tableBody.rows.length);
                const cells = [
                    newRow.insertCell(0),
                    newRow.insertCell(1),
                    newRow.insertCell(2),
                    newRow.insertCell(3),
                    newRow.insertCell(4),
                    newRow.insertCell(5),
                ];

                cells[0].textContent = tableBody.rows.length; // Incremental number
                cells[1].textContent = document.getElementById('padagogy').value;
                cells[2].textContent = document.getElementById('fdp').value;
                cells[3].textContent = document.getElementById('Workshop').value;
                cells[4].textContent = document.getElementById('programOrientation').value;
                cells[5].innerHTML = `
            <a class="view-program" data-id="${tableBody.rows.length}"><i class="fa-solid fa-eye"></i></a>
            <a class="edit-program" data-id="${tableBody.rows.length}"><i class="fa fa-edit"></i></a>
            <a class="delete-program" data-id="${tableBody.rows.length}"><i class="fa-solid fa-trash"></i></a>
        `;
                // Add an event listener to the delete button in the newly added row
                cells[5].querySelector('.delete-program').addEventListener('click', function () {
                    const rowNumber = this.getAttribute('data-id');
                    // Check if the row index is within the valid range
                    if (rowNumber <= tableBody.rows.length) {
                        // Remove the corresponding row from the table
                        console.log('row number ===>>>>', rowNumber);
                        tableBody.deleteRow(rowNumber - 1);
                        // Update data-id attributes after deletion
                        updateDataIds();
                    }
                });

                // Close the modal
                $('#exampleModal').modal('hide');
            });
        });

    </script>
</body>

</html>