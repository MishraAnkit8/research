<%- include('./partials/head') %>
<!-- inline css -->
<style>
.case-study-row.flex-container {
    display: flex;
    justify-content: space-between;
    align-items: center; 
}

.case-study-row .cell {
    flex: 1; 
    margin: 5px; 
}

.custom-modal {
     max-width: 1000px;
     max-height: 800px;
 }
 .sub-title-text{
     font-size: 15px;
     font-weight:500;
 }

</style>

<!-- Navbar section -->
<%- include('./partials/header') %>
<!-- This is left sidebar  -->
<%- include('./partials/left-sidebar') %>
    <!-- This is right side section -->
<main class="main" id="mainContent">
    <div class="base-section coustom-section mt-5 p-5">
        <div class="breadcrumbs-container">
        </div>
        <div class="errorHtml"></div>
        <div class="card table-card">
            <div class="card-header table-card-header text-uppercase d-flex align-items-center justify-content-between">
                <div>
                    <h5>PROGRAM LIST</h5>
                </div>
                <div class="me-2">
                    <a class="btn btn-danger" href="/admin/programs/download"><i class="fas fa-download"></i>
                        Download </a>
                    <button type="button" id="book-publication-form" class="btn btn-primary add-modal" data-toggle="modal" data-target="#book-publication-modal">
                        <i class="fas fa-plus plus"></i></button>
                    </button>
                </div>
            </div>
            <div class="card-body table-responsive">
                <div class="d-flex justify-content-between">
                    <div>
                        <label>Show Entries</label>
                        <select class="form-select" id="changeEntry">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="150">150</option>
                            <option value="200">200</option>
                            <option value="250">250</option>
                            <option value="300">300</option>
                            <option value="350">350</option>
                            <option value="400">400</option>
                            <option value="500">500</option>
                            <option value="800">800</option>
                            <option value="1000">1000</option>
                        </select>
                    </div>
                    <div>
                        <div class="table-searchbar-container"><button type="button"><i class="fas fa-search"></i>
                            </button><input type="search" id="searchkeyword" placeholder="Enter keywords"
                                class="table-searchbar">
                        </div>
                    </div>
                </div>
                <table class="table custom-table " id="book-Publication-list">
                    <thead>
                        <th>#</th>
                        <th>Author's name</th>
                        <th>Publication year</th>
                        <th>Book title</th>
                        <th>ISBN Number</th>
                        <th>Publisher Name</th>
                        <th>Action</th>
                    </thead>
                    <% bookPublicationList.forEach(function(publication) { %>
                        <tr row="scope" data-publication-id="<%- publication.id %>" data-author-last-name="<%-publication.author_last_name %>" data-volume-number="<%- publication.volume_number %>"
                            data-edition="<%- publication.edition %>" data-publication-place="<%-publication.publication_place %>" data-publisher-category="<%- publication.publisher_category %>"
                            data-publication-year="<%- publication.publication_year %>" data-book-url="<%- publication.book_url %>" data-doi-book-id="<%-publication.doi_id %>"
                            data-number-of-nmims-authors="<%- publication.number_of_nmims_authors %>" data-nmims-authors="<%- publication.nmims_authors %>" data-nmims-campus-authors="<%- publication.nmims_campus_authors %>"
                            data-nmims-school-authors="<%- publication.nmims_school_authors %>" data-supporting-documents="<%- publication.supporting_documents %>">
                            <td data-publication-id="<%- publication.id %>"><%- publication.id %></td>
                            <td class="author-first-name"><%- publication.author_first_name %></td>
                            <td class="publication-year"><%- publication.publication_year %></td>
                            <td class="book-title"><%- publication.book_title %></td>
                            <td class="isbn-no"><%- publication.isbn %></td>
                            <td class="publisher-name"><%- publication.publisher_name %></td>
                            <td>
                                <a class="view" data-publication-id="<%- publication.id %>"><i class="fa-solid fa-eye view"
                                    data-publication-id="<%- publication.id %>"></i></a>
                                 <a class="edit"data-publication-id="<%- publication.id %>"><i class="fa fa-edit edit"
                                    data-publication-id="<%- publication.id %>"></i></a>
                                 <a class="delete"data-publication-id="<%- publication.id %>"><i class="fa-solid fa-trash delete"
                                    data-publication-id="<%- publication.id %>"></i></a>
                            </td>
                        </tr>
                   <% }); %>
                    
                </table>
                <div class="d-flex justify-content-between">
                    <div>
                        <p>Total entries:1
                        </p>
                    </div>
                    <div>
                        <p id="pagination" class="pagination-search"></p>
                    </div>
                </div>
            </div>
        </div>
        <!--Import Modal -->
        <div class="modal fade" id="open-program-modal" tabindex="-1" aria-labelledby="open-program-modal"
            aria-hidden="true">
        </div>
        <!-- EDIT PROGRAM AND UPDATE -->
        <div class="modal fade" id="edit-program-modal" tabindex="-1" aria-labelledby="editModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editModalLabel">Update Program</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div id="errorHtml"></div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="form-label">Program Name</label>
                            <input type="text" class="form-control" id="program_name" name="program_name">
                            <input type="hidden" class="form-control" id="hidden_id" name="hidden_id">
                        </div>
                        <div class="mb-3">
                            <label for="exampleInputPassword1" class="form-label">Program Type</label>
                            <select class="form-control" name="program_type_lid" id="program_type_lid">

                                <option value="1">Full Time</option>

                                <option value="2">Part Time</option>

                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="abbr" class="form-label">Program Abbr</label>
                            <input type="text" class="form-control" id="abbr" name="abbr">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary updateProgram">Update</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<!-- modal form for Book Publication -->
<div class="modal fade " id="book-publication-modal" tabindex="-1" role="dialog" aria-labelledby="book-publication-modal"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg modal-fullscreen p-5" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="case-study"> BOOK PUBLICATION </h5>
                <div class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"><i class="fas fa-times fa-2x"></i></span>
                </div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- author's first name -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <div class="form-group col">
                            <label for="firstname" class="form-label  fw-bold">Author's first name</label>
                            <input type="text" name="author-first-name" id="author-first-name" class="form-control"
                                placeholder="First name">
                        </div>
                    </div>
                    <!-- Author's last name -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <div class="form-group col">
                            <label for="lastname" class="form-label  fw-bold">Author's last name</label>
                            <input type="text" name="lname" id="author-last-name" class="form-control" placeholder="Last name">
                        </div>
                    </div>
                    <!-- Title of case study -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="caseStudy" class="form-label fw-bold">Title of book</label>
                        <input type="text" name="titleOfBook" id="book-title" class="form-control"
                            placeholder="Title of Book">
                    </div>
                    <!-- Edition -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="edition" class="form-label fw-bold">Edition (if it isn't the first)</label>
                        <input type="text" name="case-study" id="edition" class="form-control" placeholder="Optional">
                    </div>
                    <!-- Volume number -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="Volume" class="form-label fw-bold">Volume number</label>
                        <input type="text" name="vol" id="volume-number" class="form-control" placeholder="Optional">
                    </div>
                    <!-- Publisher Name -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="publisherName" class="form-label fw-bold">Publisher Name</label>
                        <input type="text" name="vol" id="publisher-name" class="form-control"
                            placeholder="Pulisher name">
                    </div>
                    <!-- Publisher Category  -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="publisher-category" id="publisher-category" class="form-label fw-bold mb-3">Publisher Category</label><br>
                        <div class="form-check-inline">
                            <label for="inter-national" class="form-check-label">
                                <input type="radio" class="form-check-input" id="inter-national" name="publisher-category" value="International"> International
                            </label>
                        </div>
                        <div class="form-check-inline">
                            <label for="national" class="form-check-label">
                                <input type="radio" class="form-check-input" id="national" name="publisher-category" value="National"> National
                            </label>
                        </div>
                    </div>
                    <!-- Publication Year -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="publicationYear" class="form-label fw-bold">Publication Year</label>
                        <input type="text" name="Year" id="publication-year" class="form-control"
                            placeholder="Publication Year">
                    </div>
                    <!-- URL of the book publication -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="URL of book" class="form-label fw-bold">URL of book</label>
                        <input type="url" name="URL" id="book-url" class="form-control"
                            placeholder="URL">
                    </div>
                     <!-- ISBN Number -->
                     <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="caseStudy" class="form-label fw-bold">ISBN Number</label>
                        <input type="ISBN Number" name="ISBN-Number" id="isbn-no" class="form-control"
                            placeholder="ISBN Number">
                    </div>
                     <!-- DOI of book -->
                     <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="doi-book-id" class="form-label fw-bold">DOI of book</label>
                        <input type="text" name="doi-book-id" id="doi-book-id" class="form-control"
                            placeholder="DOI BOOK ">
                    </div>
                     <!-- Place of Publication -->
                     <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="publication-place" class="form-label fw-bold">Place of Publication</label>
                        <input type="text" name="publication-place" id="publication-place" class="form-control"
                            placeholder="publication Place ">
                    </div>
                    <!-- No. of NMIMS Authors -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="NMIMSAuthors" class="form-label fw-bold ">No. of NMIMS Authors</label>
                        <input type="text" name="nmims-authors" id="number-of-nmims-authors"
                            placeholder="No. of NMIMS Authors" class="form-control " />
                    </div>
                    <!-- Name of NMIMS Authors -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="nameOfAuthors" class="form-label fw-bold ">Name of NMIMS Authors</label>
                        <input type="text" name="web-link" id="nmims-authors" placeholder="Name of NMIMS Authors"
                            class="form-control " />
                    </div>
                    <!-- NMIMS Campus - Author -->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="campusAuthors" class="form-label fw-bold ">NMIMS Campus Author</label>
                        <input type="url" name="web-link" id="nmims-campus-authors" placeholder="NMIMS Campus Author"
                            class="form-control " />
                    </div>
                    <!--NMIMS School - Author-->
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="campusAuthors" class="form-label fw-bold ">NMIMS School Author</label>
                        <input type="url" name="web-link" id="nmims-school-authors" placeholder="NMIMS School Author"
                            class="form-control " />
                    </div>
                      <!-- Upload Supporting Documents-->
                      <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <label for="supporting-documents" class="form-label fw-bold">
                            Upload Supporting Documents
                        </label>
                        <input type="file" name="researchSupportingDocument" id="supporting-documents" class="form-control" min='2000-01-01'
                            max="2023-10-02">
                    </div>
                </div>
            </div>
           <!-- Add your modal footer buttons if needed -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                <button class="btn btn-md btn-success d-none" id="submit-btn">Submit</button>
                <button class="btn btn-md btn-success d-none" id="update-btn">update</button>
            </div>
        </div>
    </div>
</div>
<script>
    const bookPublicationList = document.getElementById('book-Publication-list');
    const submitBtn = document.getElementById('submit-btn');
    const updateBtn = document.getElementById('update-btn');
    const addNewBookPublication = document.getElementById('book-publication-form');
    let BookpublicationId , bookPublicationRowToBeUpdated;
    addNewBookPublication.addEventListener('click' , function(event) {
        console.log('clikeddd')
        if(event.target.tagName === 'BUTTON' && event.target.classList.contains('add-modal') || event.target.classList.contains('plus')){
            updateBtn.classList.add('d-none');
            submitBtn.classList.remove('d-none');
        }
    })
    const  insertBookPublication = async(url) =>{
        const bookPublicationData = new FormData();
        const authorFirstName = document.getElementById('author-first-name').value;
        const authorLastName = document.getElementById('author-last-name').value;
        const bookTitle = document.getElementById('book-title').value;
        const edition = document.getElementById('edition').value;
        const isbnNo = document.getElementById('isbn-no').value;
        const publicationPlace = document.getElementById('publication-place').value;
        const publisherCategory = document.querySelector('input[name="publisher-category"]:checked').value;
        const volumeNumber = document.getElementById('volume-number').value;
        const publisherName = document.getElementById('publisher-name').value;
        const publicationYear = document.getElementById('publication-year').value;
        const bookUrl = document.getElementById('book-url').value;
        const doiBookId = document.getElementById('doi-book-id').value;
        const numberOfNmimsAuthors = document.getElementById('number-of-nmims-authors').value;
        const nmimsAuthors = document.getElementById('nmims-authors').value;
        const nmimsCampusAuthors = document.getElementById('nmims-campus-authors').value;
        const nmimsSchoolAuthors = document.getElementById('nmims-school-authors').value;
        const supportingDocuments = document.querySelector('input[type="file"]')

        // appending value
        bookPublicationData.append('authorFirstName' , authorFirstName);
        bookPublicationData.append('authorLastName' , authorLastName);
        bookPublicationData.append('booktitle' , bookTitle);
        bookPublicationData.append('edition' , edition);
        bookPublicationData.append('bookTitle' , booktitle);
        bookPublicationData.append('isbnNo' , isbnNo);
        bookPublicationData.append('publicationPlace' , publicationPlace);
        bookPublicationData.append('publisherCategory' , publisherCategory);
        bookPublicationData.append('volumeNumber' , volumeNumber);
        bookPublicationData.append('publisherName' , publisherName);
        bookPublicationData.append('publicationYear' , publicationYear);
        bookPublicationData.append('bookUrl' , bookUrl);
        bookPublicationData.append('doiBookId' , doiBookId);
        bookPublicationData.append('numberOfNmimsAuthors' , numberOfNmimsAuthors);
        bookPublicationData.append('nmimsAuthors' , nmimsAuthors);
        bookPublicationData.append('nmimsCampusAuthors' , nmimsCampusAuthors);
        bookPublicationData.append('nmimsSchoolAuthors' , nmimsSchoolAuthors);
        bookPublicationData.append('researchSupportingDocument' , supportingDocuments.files[0]);

        fetch(url , {
            method : 'POST',
            body : bookPublicationData
        })
        .then((result) => {
            return result.json()
        })
        .then((data) => {
           if(data.status === 'done'){
            console.log('data ==>>', data)
            const newBookPublication = document.createElement('tr');
            newBookPublication.setAttribute('data-volume-number' , data.bookPublicationData.volumeNumber);
            newBookPublication.setAttribute('data-edition' , data.bookPublicationData.edition);
            newBookPublication.setAttribute('data-publication-place' , data.bookPublicationData.edition);
            newBookPublication.setAttribute('data-publisher-category' , data.bookPublicationData.publisherCategory);
            newBookPublication.setAttribute('data-publication-year' , data.bookPublicationData.publicationYear);
            newBookPublication.setAttribute('data-book-url' , data.bookPublicationData.bookUrl);
            newBookPublication.setAttribute('data-doi-book-id' , data.bookPublicationData.doiBookId);
            newBookPublication.setAttribute('data-number-of-nmims-authors' , data.bookPublicationData.numberOfNmimsAuthors);
            newBookPublication.setAttribute('data-nmims-authors' , data.bookPublicationData.nmimsAuthors);
            newBookPublication.setAttribute('data-nmims-campus-authors' , data.bookPublicationData.nmimsCampusAuthors);
            newBookPublication.setAttribute('data-nmims-school-authors' , data.bookPublicationData.nmimsSchoolAuthors);
            newBookPublication.setAttribute('data-supporting-documents' , data.bookPublicationData.supportingDocuments);
            newBookPublication.innerHTML = `
                        <td >${data.BookpublicationId}</td>
                            <td class="author-first-name">${data.bookPublicationData.authorFirstName}</td>
                            <td class="publication-year">${data.bookPublicationData.publicationYear}</td>
                            <td class="book-title">${data.bookPublicationData.bookTitle}</td>
                            <td class="isbn-no">${data.bookPublicationData.isbnNo}</td>
                            <td class="publisher-name">${data.bookPublicationData.publisherName}</td>
                            <td>
                                <a class="view" data-publication-id="${data.BookpublicationId}"><i class="fa-solid fa-eye view"
                                    data-publication-id="${data.BookpublicationId}"></i></a>
                                 <a class="edit"data-publication-id="${data.BookpublicationId}"><i class="fa fa-edit edit"
                                    data-publication-id="${data.BookpublicationId}"></i></a>
                                 <a class="delete"data-publication-id="${data.BookpublicationId}"><i class="fa-solid fa-trash delete"
                                    data-publication-id="${data.BookpublicationId}"></i></a>
                            </td> `;
            bookPublicationList.append(newBookPublication);
            $('#book-publication-modal').modal('hide');
            alert('data inserted successfully');
           }
        })
    }
    submitBtn.addEventListener('click' , async function() {
       await insertBookPublication('/research/book-publication-main/edited-book-publication/insert')
    })

    bookPublicationList.addEventListener('click' , (event) => {
        // for updation
        if(event.target.classList.contains('edit')){
            console.log('clickeddd');
            bookPublicationRowToBeUpdated = event.target.closest('tr');
            console.log('bookPublicationRowToBeUpdated ==>>', bookPublicationRowToBeUpdated);
            BookpublicationId = bookPublicationRowToBeUpdated.getAttribute('data-publication-id');
            console.log('BookpublicationId ==>>', BookpublicationId);
            $('#book-publication-modal').modal('show');
            updateBtn.classList.remove('d-none');
            submitBtn.classList.add('d-none');
            const authorFirstName = document.getElementById('author-first-name');
            const authorLastName = document.getElementById('author-last-name');
            const bookTitle = document.getElementById('book-title');
            const edition = document.getElementById('edition');
            const isbnNo = document.getElementById('isbn-no');
            const publicationPlace = document.getElementById('publication-place');
            const publisherCategoryNational = document.getElementById('national');
            const publisherCategoryInternational = document.getElementById('inter-national');
            const volumeNumber = document.getElementById('volume-number');
            const publisherName = document.getElementById('publisher-name');
            const publicationYear = document.getElementById('publication-year');
            const bookUrl = document.getElementById('book-url');
            const doiBookId = document.getElementById('doi-book-id');
            const numberOfNmimsAuthors = document.getElementById('number-of-nmims-authors');
            const nmimsAuthors = document.getElementById('nmims-authors');
            const nmimsCampusAuthors = document.getElementById('nmims-campus-authors');
            const nmimsSchoolAuthors = document.getElementById('nmims-school-authors');
            const supportingDocuments = document.getElementById('supporting-documents');
            // assigning related row data value
            authorFirstName.value = bookPublicationRowToBeUpdated.querySelector('.author-first-name').innerText;
            authorLastName.value = bookPublicationRowToBeUpdated.getAttribute('data-author-last-name');
            bookTitle.value = bookPublicationRowToBeUpdated.querySelector('.book-title').innerText;
            edition.value = bookPublicationRowToBeUpdated.getAttribute('data-edition');
            publisherName.value = bookPublicationRowToBeUpdated.querySelector('.publisher-name').innerText;
            isbnNo.value = bookPublicationRowToBeUpdated.querySelector('.isbn-no').innerText;
            publicationPlace.value = bookPublicationRowToBeUpdated.getAttribute('data-publication-place');
            const publisherCategory = bookPublicationRowToBeUpdated.getAttribute('data-publisher-category');
            if(publisherCategory === 'National'){
                publisherCategoryNational.checked = true;
            }
            else{
                publisherCategoryInternational.checked = true;
            }
            volumeNumber.value = bookPublicationRowToBeUpdated.getAttribute('data-volume-number');
            publicationYear.value = bookPublicationRowToBeUpdated.querySelector('.publication-year').innerText;
            bookUrl.value = bookPublicationRowToBeUpdated.getAttribute('data-book-url');
            doiBookId.value = bookPublicationRowToBeUpdated.getAttribute('data-doi-book-id');
            numberOfNmimsAuthors.value = bookPublicationRowToBeUpdated.getAttribute('data-number-of-nmims-authors');
            nmimsAuthors.value = bookPublicationRowToBeUpdated.getAttribute('data-nmims-authors');
            nmimsCampusAuthors.value = bookPublicationRowToBeUpdated.getAttribute('data-nmims-campus-authors');
            nmimsSchoolAuthors.value = bookPublicationRowToBeUpdated.getAttribute('data-nmims-school-authors');
            supportingDocuments.textContent = bookPublicationRowToBeUpdated.getAttribute('data-supporting-documents');
            }
        
        //  for delete   
        if(event.target.classList.contains('delete')){
            console.log('clickedddd');
            const bookPublicatRowToBeDeleted = event.target.closest('tr');
            console.log('bookPublicatRowToBeDeleted  ==>>', bookPublicatRowToBeDeleted);
            BookpublicationId = bookPublicatRowToBeDeleted.getAttribute('data-publication-id');
        }
    })

    updateBtn.addEventListener('click' , () => {
        const updatedBookPublicationData = new FormData();
        const updatedAuthorFirstName = document.getElementById('author-first-name').value;
        const updatedaAuthorLastName = document.getElementById('author-last-name').value;
        const updatedBookTitle = document.getElementById('book-title').value;
        const updatedEdition = document.getElementById('edition').value;
        const updatedIsbnNo = document.getElementById('isbn-no').value;
        const updatedPublicationPlace = document.getElementById('publication-place').value;
        const updatedPublisherCategory = document.querySelector('input[name="publisher-category"]:checked').value;
        const updatedVolumeNumber = document.getElementById('volume-number').value;
        const updatedPublisherName = document.getElementById('publisher-name').value;
        const updatedPublicationYear = document.getElementById('publication-year').value;
        const updatedBookUrl = document.getElementById('book-url').value;
        const updatedDoiBookId = document.getElementById('doi-book-id').value;
        const updatedNumberOfNmimsAuthors = document.getElementById('number-of-nmims-authors').value;
        const updatedNmimsAuthors = document.getElementById('nmims-authors').value;
        const updatedNmimsCampusAuthors = document.getElementById('nmims-campus-authors').value;
        const updatedNmimsSchoolAuthors = document.getElementById('nmims-school-authors').value;
        const updatedDocuments = document.getElementById('supporting-documents');
        updatedBookPublicationData.append('BookpublicationId' , BookpublicationId);
        updatedBookPublicationData.append('authorFirstName' , updatedAuthorFirstName);
        updatedBookPublicationData.append('authorLastName' , updatedaAuthorLastName);
        updatedBookPublicationData.append('bookTitle' , updatedBookTitle);
        updatedBookPublicationData.append('edition' , updatedEdition);
        updatedBookPublicationData.append('isbnNo' , updatedIsbnNo);
        updatedBookPublicationData.append('publicationPlace' , updatedPublicationPlace);
        updatedBookPublicationData.append('publisherCategory' , updatedPublisherCategory);
        updatedBookPublicationData.append('volumeNumber' , updatedVolumeNumber);
        updatedBookPublicationData.append('publisherName' , updatedPublisherName);
        updatedBookPublicationData.append('publicationYear' , updatedPublicationYear);
        updatedBookPublicationData.append('bookUrl' , updatedBookUrl);
        updatedBookPublicationData.append('doiBookId' , updatedDoiBookId);
        updatedBookPublicationData.append('numberOfNmimsAuthors' , updatedNumberOfNmimsAuthors);
        updatedBookPublicationData.append('nmimsAuthors' , updatedNmimsAuthors);
        updatedBookPublicationData.append('nmimsCampusAuthors' , updatedNmimsCampusAuthors);
        updatedBookPublicationData.append('nmimsSchoolAuthors' , updatedNmimsSchoolAuthors);
        if(updatedDocuments && updatedDocuments.files && updatedDocuments.files.length > 0){
            updatedBookPublicationData.append('researchSupportingDocument' , updatedDocuments.files[0]);
         }
        fetch('/research/book-publication-main/edited-book-publication/update' , {
            method : 'POST',
            body : updatedBookPublicationData
        })
        .then((result) => {
            return result.json()
        })
        .then((data) => {
            if(data.status === 'done'){
                console.log('data ==>>', data);
                bookPublicationRowToBeUpdated.setAttribute('data-volume-number' , data.updatedBookPublication.volumeNumber);
                bookPublicationRowToBeUpdated.setAttribute('data-edition' , data.updatedBookPublication.edition);
                bookPublicationRowToBeUpdated.setAttribute('data-publication-place' , data.updatedBookPublication.edition);
                bookPublicationRowToBeUpdated.setAttribute('data-publisher-category' , data.updatedBookPublication.publisherCategory);
                bookPublicationRowToBeUpdated.setAttribute('data-publication-year' , data.updatedBookPublication.publicationYear);
                bookPublicationRowToBeUpdated.setAttribute('data-book-url' , data.updatedBookPublication.bookUrl);
                bookPublicationRowToBeUpdated.setAttribute('data-doi-book-id' , data.updatedBookPublication.doiBookId);
                bookPublicationRowToBeUpdated.setAttribute('data-number-of-nmims-authors' , data.updatedBookPublication.numberOfNmimsAuthors);
                bookPublicationRowToBeUpdated.setAttribute('data-nmims-authors' , data.updatedBookPublication.nmimsAuthors);
                bookPublicationRowToBeUpdated.setAttribute('data-nmims-campus-authors' , data.updatedBookPublication.nmimsCampusAuthors);
                bookPublicationRowToBeUpdated.setAttribute('data-nmims-school-authors' , data.updatedBookPublication.nmimsSchoolAuthors);
                bookPublicationRowToBeUpdated.setAttribute('data-supporting-documents' , data.updatedBookPublication.supportingDocuments);
                bookPublicationRowToBeUpdated.querySelector('.author-first-name').innerText = data.updatedBookPublication.authorFirstName;
                bookPublicationRowToBeUpdated.querySelector('.book-title').innerText = data.updatedBookPublication.bookTitle;
                bookPublicationRowToBeUpdated.querySelector('.publisher-name').innerText = data.updatedBookPublication.publisherName;
                bookPublicationRowToBeUpdated.querySelector('.isbn-no').innerText = data.updatedBookPublication.isbnNo;
                bookPublicationRowToBeUpdated.querySelector('.publication-year').innerText = data.updatedBookPublication.publicationYear;
                }
            })
            .catch((error) => {
                console.log('Eroor ::', error);
            })
            $('#book-publication-modal').modal('hide');
            alert('data updated successfully');
    })
</script>
<!-- footer section -->
<%- include('./partials/footer') %>
<%- include('./partials/footer-end') %>
           